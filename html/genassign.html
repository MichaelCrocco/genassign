<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2" />
<title>genassign API documentation</title>
<meta name="description" content="*Generates Individualized Assignments and Solutions based on a LaTeX Template* â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>genassign</code></h1>
</header>
<section id="section-intro">
<p><em>Generates Individualized Assignments and Solutions based on a LaTeX Template</em></p>
<p><strong>Author:</strong> Colin Caprani,
<a href="mailto://colin.caprani@monash.edu">colin.caprani@monash.edu</a></p>
<h2 id="overview">Overview</h2>
<p><a title="genassign" href="#genassign"><code>genassign</code></a> is a wrapper script that does two main things:</p>
<ol>
<li>
<p>It repeatedly calls a LaTeX-PythonTex template file and places
the output in subfolders of the template file directory.</p>
</li>
<li>
<p>It substitutes student-specific data into each generated file.</p>
</li>
</ol>
<p>When the template file has randomization embedded, this is called
automatically at each compilation, resulting in individualized assignments.
Further, using a specific sequence of LaTeX commands, the question paper
and associated solution file are generated separtely and placed into
separate subfolders of the template file directory.</p>
<p><a title="genassign" href="#genassign"><code>genassign</code></a> is written to allow indpendent compilation of the template file
to facilitate deveopment and checking of the questions and solutions,
including close control of the randomization.</p>
<p>It is not necessary for there to be PythonTex commands in the template.</p>
<h2 id="useage">Useage</h2>
<p>Prepare a template LaTeX-PytonTex file with complete questions and
solutions. Add the jinja templating variables to the document as necessary.
Include the LaTeX commands, and wrap the solutions as shown above.
Use PythonTex to randomize the problem variables upon each compilation.</p>
<p>Standard example useage:</p>
<pre><code class="python">python genassign.py main.tex students.csv -t &quot;Test 1&quot;
</code></pre>
<p>To debug:</p>
<pre><code class="python">!debugfile('genassign.py', args='&quot;main.tex&quot; &quot;students.csv&quot;')
</code></pre>
<h2 id="commands">Commands</h2>
<pre><code>genassign.py [-h] [-t TITLE] [-m MOODLE_STEM] [-s SOL_STEM]
                [-p PAPER_STEM] [-a ANSDIR] [-q QUESTDIR]
                template worksheet
</code></pre>
<p>optional arguments:</p>
<p><code>-h</code>, <code>--help</code>
show this help message and exit</p>
<p><code>-t</code> TITLE, <code>--title</code> TITLE
Test title filename prefix</p>
<p><code>-m</code> MOODLE_STEM, <code>--moodle_stem</code> MOODLE_STEM
Moodle assignment type folder stem, usually <code>onlinetext</code> or <code>file</code></p>
<p><code>-s</code> SOL_STEM, <code>--sol_stem</code> SOL_STEM
Solutions filename stem, e.g. <code>'_sols'</code></p>
<p><code>-p</code> PAPER_STEM, <code>--paper_stem</code> PAPER_STEM
Question paper filename stem, e.g. <code>'_paper'</code></p>
<p><code>-a</code> ANSDIR, <code>--ansdir</code> ANSDIR
Directory name for solutions output, e.g. <code>'solutions'</code></p>
<p><code>-q</code> QUESTDIR, <code>--questdir</code> QUESTDIR
Directory name for questions output, e.g. <code>'questions'</code></p>
<p>required named arguments:</p>
<p><code>template</code>
LaTeX Template File with certain commands for jinja2
and hiding solutions, e.g. <code>main.tex</code></p>
<p><code>worksheet</code> Student Moodle worksheet of specific format from
assignment grading, e.g. <code>students.csv</code></p>
<h2 id="requirements">Requirements</h2>
<p>System requirements are working installations of Python, LaTeX, and
PythonTex. More specifically, <code>genassign</code> requires:</p>
<ol>
<li>
<p>A LaTeX-PythonTex template with certain specific commands</p>
</li>
<li>
<p>A Moodle grading worksheet for the assigment as input</p>
</li>
</ol>
<h2 id="template">Template</h2>
<p>There are two commands required at a minimum in the LaTeX file.</p>
<p><em>Jinja2 Templating</em></p>
<p>The command for <em>jinja2</em> templating</p>
<pre><code>    \newcommand*{\VAR}[1]{}
</code></pre>
<p>which has no effect on the template other than to identify variables
used for subsitution of student-specific information as defined in
Moodle worksheet:</p>
<ul>
<li>
<p>Student's full name: <code>\VAR{FULL_NAME}</code></p>
</li>
<li>
<p>Student's ID: <code>\VAR{STUDENT_ID}</code></p>
</li>
</ul>
<p><em>LaTeX Commands</em></p>
<p>The LaTeX commands to wrap the solutions, so they can be toggled on and
off must be placed in the document preamble. The following must appear:</p>
<pre><code>\usepackage{comment}

\newif\ifhidden
% This defines whether to show the hidden content or not.
\hiddenfalse
\ifhidden   % if \ hiddentrue
    \excludecomment{hidden} % Exclude text within the &quot;hidden&quot; environment
\else       % \ hiddenfalse
    \includecomment{hidden} % Include text in the &quot;hidden&quot; environment
\fi
</code></pre>
<p>so that the solutions are wrapped in the document body as follows</p>
<pre><code>\begin{hidden}
    ...LaTeX solution code, including PythonTex as necessary
\end{hidden}
</code></pre>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="genassign.gen_assign"><code class="name flex">
<span>def <span class="ident">gen_assign</span></span>(<span>student, template, assign_strings)</span>
</code></dt>
<dd>
<section class="desc"><p>Drives the rendering and compilation process for each student, and
cleans up the files afterwards.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>student</code></strong> :&ensp;<code>tuple</code> of <code>string</code></dt>
<dd>Contains student's data: Moodle ID, Full Name, Student ID.</dd>
<dt><strong><code>template</code></strong> :&ensp;<code>jinja2</code> <code>template</code></dt>
<dd>set to render the LaTeX file.</dd>
<dt><strong><code>assign_strings</code></strong> :&ensp;<code>tuple</code> of <code>strings</code></dt>
<dd>Contains prgram string variables in the order:
tmpfile = temporary file name
moodle_str = older name stem as appropriate to the type of
Moodle assigment. Usually 'file' or 'onlinetext'
filename_prefix = title of test typically
solutions_stem = filename postfix for solutions pdf
questions_stem = filename postfix for questions pdf
solutions_dir = name of solutions directory
questions_dir = name of questons directory</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.gen_q_and_a"><code class="name flex">
<span>def <span class="ident">gen_q_and_a</span></span>(<span>student, assign_strings)</span>
</code></dt>
<dd>
<section class="desc"><p>Generates the Questions and Answers documents for a student</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>student</code></strong> :&ensp;<code>tuple</code> of <code>string</code></dt>
<dd>Contains student's data: Moodle ID, Full Name, Student ID.</dd>
<dt><strong><code>assign_strings</code></strong> :&ensp;<code>tuple</code> of <code>strings</code></dt>
<dd>Contains prgram string variables in the order:
tmpfile = temporary file name
moodle_str = older name stem as appropriate to the type of
Moodle assigment. Usually 'file' or 'onlinetext'
filename_prefix = title of test typically
solutions_stem = filename postfix for solutions pdf
questions_stem = filename postfix for questions pdf
solutions_dir = name of solutions directory
questions_dir = name of questons directory</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>args)</span>
</code></dt>
<dd>
<section class="desc"><p>The main function, called when file is run as script, allowing the other
functions to be used from this script through a module interface</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>args</code></strong> :&ensp;<code>argparse</code> <code>arguments</code></dt>
<dd>The command line arguments parsed using argparse</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.make_template"><code class="name flex">
<span>def <span class="ident">make_template</span></span>(<span>texfile, tmpfile)</span>
</code></dt>
<dd>
<section class="desc"><p>Creates the jinja2 template using a redefined template structure that
plays nicely with LaTeX
<a href="https://web.archive.org/web/20121024021221/http://e6h.de/post/11/">https://web.archive.org/web/20121024021221/http://e6h.de/post/11/</a></p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>texfile</code></strong> :&ensp;<code>string</code></dt>
<dd>The template LaTeX file containing jinja template variables.</dd>
<dt><strong><code>tmpfile</code></strong> :&ensp;<code>string</code></dt>
<dd>The name of the temporary files that will be used.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>jinja2</code> <code>template</code></dt>
<dd>jinja2 template used to render the documents.</dd>
</dl></section>
</dd>
<dt id="genassign.move_pdf"><code class="name flex">
<span>def <span class="ident">move_pdf</span></span>(<span>student, tmpfile, root, file_stem, moodle_str, prefix)</span>
</code></dt>
<dd>
<section class="desc"><p>Moves the compiled PDF to the appropriate folder</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>student</code></strong> :&ensp;<code>tuple</code> of <code>string</code></dt>
<dd>Contains student's data: Moodle ID, Full Name, Student ID.</dd>
<dt><strong><code>tmpfile</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the temporary files.</dd>
<dt><strong><code>root</code></strong> :&ensp;<code>string</code></dt>
<dd>The name of the subfodler in which the student's folder will be placed.
Usually one of 'solutions' or 'questions'</dd>
<dt><strong><code>file_stem</code></strong> :&ensp;<code>string</code></dt>
<dd>Postfix to be applied to student-specific string to distinguish
questions from solutions</dd>
<dt><strong><code>moodle_str</code></strong> :&ensp;<code>string</code></dt>
<dd>Folder name stem as appropriate to the type of Moodle assigment.
Usually 'file' or 'onlinetext'</dd>
<dt><strong><code>prefix</code></strong> :&ensp;<code>string</code></dt>
<dd>Prefix to be applied to the student-specific filenames. Usually the
title of the test.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.remove_readonly"><code class="name flex">
<span>def <span class="ident">remove_readonly</span></span>(<span>func, path, excinfo)</span>
</code></dt>
<dd>
<section class="desc"><p>Attempts to remove a read-only file by changing the permissions</p></section>
</dd>
<dt id="genassign.render_student_tex_file"><code class="name flex">
<span>def <span class="ident">render_student_tex_file</span></span>(<span>student, template, tmpfile)</span>
</code></dt>
<dd>
<section class="desc"><p>Renders the tex file for compilation for a specific student</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>student</code></strong> :&ensp;<code>tuple</code> of <code>string</code></dt>
<dd>Contains student's data: Moodle ID, Full Name, Student ID.</dd>
<dt><strong><code>template</code></strong> :&ensp;<code>jinja2</code> <code>template</code></dt>
<dd>sed to render the LaTeX file.</dd>
<dt><strong><code>tmpfile</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the temporary files.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.set_hidden"><code class="name flex">
<span>def <span class="ident">set_hidden</span></span>(<span>texfile, hidden=True)</span>
</code></dt>
<dd>
<section class="desc"><p>Toggles the solutions visbility in the student's LaTeX file</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>texfile</code></strong> :&ensp;<code>string</code></dt>
<dd>The template LaTeX file containing jinja template variables.</dd>
<dt><strong><code>hidden</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>Whether or not the solutions are to be hidden. The default is True.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></section>
</dd>
<dt id="genassign.student_strings"><code class="name flex">
<span>def <span class="ident">student_strings</span></span>(<span>student, moodle_str)</span>
</code></dt>
<dd>
<section class="desc"><p>Creates the file and folder name strings for a student</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>student</code></strong> :&ensp;<code>tuple</code> of <code>string</code></dt>
<dd>Contains student's data: Moodle ID, Full Name, Student ID.</dd>
<dt><strong><code>moodle_str</code></strong> :&ensp;<code>string</code></dt>
<dd>Folder name stem as appropriate to the type of Moodle assigment.
Usually 'file' or 'onlinetext'</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>student_file</code></strong> :&ensp;<code>string</code></dt>
<dd>The student-specific part of the pdf filename</dd>
<dt><strong><code>student_folder</code></strong> :&ensp;<code>string</code></dt>
<dd>The student-specific part of the folder name</dd>
</dl></section>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="genassign.gen_assign" href="#genassign.gen_assign">gen_assign</a></code></li>
<li><code><a title="genassign.gen_q_and_a" href="#genassign.gen_q_and_a">gen_q_and_a</a></code></li>
<li><code><a title="genassign.main" href="#genassign.main">main</a></code></li>
<li><code><a title="genassign.make_template" href="#genassign.make_template">make_template</a></code></li>
<li><code><a title="genassign.move_pdf" href="#genassign.move_pdf">move_pdf</a></code></li>
<li><code><a title="genassign.remove_readonly" href="#genassign.remove_readonly">remove_readonly</a></code></li>
<li><code><a title="genassign.render_student_tex_file" href="#genassign.render_student_tex_file">render_student_tex_file</a></code></li>
<li><code><a title="genassign.set_hidden" href="#genassign.set_hidden">set_hidden</a></code></li>
<li><code><a title="genassign.student_strings" href="#genassign.student_strings">student_strings</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>